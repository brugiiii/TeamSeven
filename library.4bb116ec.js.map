{"mappings":"iiBAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,2FAMME,EAAY,IAAI,EAAAC,EAAAC,SAEhBC,EAAO,CACXC,WAAYC,SAASC,cAAc,yBACnCC,SAAUF,SAASC,cAAc,wB,SAQpBE,I,OAAAA,EAAfC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAyBC,G,IAKfC,EACAC,E,kFAJNf,EAAUgB,a,SACJ,IAAIC,SAAQ,SAAAC,G,OAAWC,WAAWD,EAAS,I,WAE3CJ,GAAU,EAAAM,EAAAC,MAAKD,EAAAE,YAAYC,UAAY,IACvCR,EAAYV,SAASC,cAAc,kBAC/BkB,UAAY,GAEtBV,EAAQW,KAAI,SAAAC,GASV,I,kBACE,IAAMC,EAAQC,EAAYC,MAAK,SAAAC,G,OAAKA,EAAEC,KAAOC,EAASC,GAAGF,E,IACzDG,EAAYC,KAAKR,EAAMS,K,EAVjBC,EACNX,EADMW,YAAaC,EACnBZ,EADmBY,eAAgBC,EACnCb,EADmCa,OAAQC,EAC3Cd,EAD2Cc,aAAcT,EACzDL,EADyDK,GAErDU,EAAOD,EAAaE,MAAM,EAAG,GAE7Bd,EAAenB,EAAAkC,EAAA,CAAG9B,EAAW0B,QAC7BP,EAAWO,EACbL,EAAc,GAETU,EAAI,EAAGA,EAAIZ,EAASa,OAAQD,IAAGE,EAAAF,GAIxC,IAAIG,EAAgBtC,EAAAkC,EAAD,CAAIT,EAAYQ,MAAM,EAAG,IAArBM,OAAJ,CALL,UAKyCC,KAAK,MACxDf,EAAYW,OAASK,EAAAC,kBACvBJ,EAAgBtC,EAAAkC,EAAD,CAAIT,GAAae,KAAK,OAGvC,IAAMG,GAAK,EAAAC,EAAAnD,SAAa,CACtBmC,cACAC,iBACAS,eACAN,OACAV,OAGFhB,EAAUuC,mBAAmB,YAAaF,E,IAG5CpD,EAAUuD,a,kDAEVC,QAAQC,MAAM,mCAAkCC,EAAAC,I,2DAxC5BC,MAAAC,KAAAC,U,EALxB,EAAAZ,EAAAa,sBAAqBC,M,SAKInD,G,OAAVL,EAASoD,MAAAC,KAAAC,U,IAHxB3D,EAAKC,WAAW6D,iBAAiB,QAASC,EAAAC,wBAC1ChE,EAAKI,SAAS0D,iBAAiB,QAASC,EAAAE,qB","sources":["src/js/library.js","src/js/actionLibrary.js"],"sourcesContent":["import './teamModal';\nimport './searchByKeyword';\nimport './cardModal';\nimport './actionLibrary';","import NewLoader from './loader';\nimport * as renderingFromStorage from './renderFromStorage';\nimport { load, storageKeys } from './localStorage';\nimport cardTemplate from '../templates/cardTemplate.hbs';\nimport { numberOfGeneras, ganreListProcessin } from './searchByKeyword';\n\nconst newLoader = new NewLoader();\n\nconst refs = {\n  btnWatched: document.querySelector('.library__btn-watched'),\n  btnQueue: document.querySelector('.library__btn-queue'),\n};\n\nganreListProcessin().then(fetchData);\n\nrefs.btnWatched.addEventListener('click', renderingFromStorage.loadFromStorageWatched);\nrefs.btnQueue.addEventListener('click', renderingFromStorage.loadFromStorageQueue);\n\nasync function fetchData(genresBase) {\n  try {\n    newLoader.showLoader();\n    await new Promise(resolve => setTimeout(resolve, 300));\n\n    const results = load(storageKeys.WATCHED) || [];\n    const container = document.querySelector('.main-content');\n    container.innerHTML = '';\n\n    results.map(result => { \n      const { poster_path, original_title, genres, release_date, id } =\n        result;\n      const date = release_date.slice(0, 4);\n\n      const genresArray = [...genresBase.genres];\n      const genreIds = genres;\n      let genresNames = [];\n      const other = 'Other';\n      for (let i = 0; i < genreIds.length; i++) {\n        const genre = genresArray.find(g => g.id === genreIds[i].id); \n        genresNames.push(genre.name);\n      } \n      let currentGanre = [...genresNames.slice(0, 2), other].join(', ');\n      if (genresNames.length < numberOfGeneras) {\n        currentGanre = [...genresNames].join(', ');\n      }\n\n      const mk = cardTemplate({\n        poster_path,\n        original_title,\n        currentGanre,\n        date,\n        id,\n      });\n\n      container.insertAdjacentHTML('beforeend', mk);\n    });\n   \n    newLoader.hideLoader();\n  } catch (error) {\n    console.error('Помилка під час отримання даних:', error);\n  }\n}"],"names":["parcelRequire","$bpxeT","$2b548d6f55e5a522$var$newLoader","$kvC6y","default","$2b548d6f55e5a522$var$refs","btnWatched","document","querySelector","btnQueue","$2b548d6f55e5a522$var$_fetchData","$parcel$interopDefault","$2TvXO","mark","_callee","genresBase","results","container","showLoader","Promise","resolve","setTimeout","$UL92Z","load","storageKeys","WATCHED","innerHTML","map","result","genre","genresArray","find","g","id","genreIds","i","genresNames","push","name","poster_path","original_title","genres","release_date","date","slice","$8nrFW","i1","length","_loop","currentGanre","concat","join","$9BNc1","numberOfGeneras","mk","$drCPS","insertAdjacentHTML","hideLoader","console","error","_ctx","t0","apply","this","arguments","ganreListProcessin","then","addEventListener","$gE17f","loadFromStorageWatched","loadFromStorageQueue"],"version":3,"file":"library.4bb116ec.js.map"}