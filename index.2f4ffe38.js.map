{"mappings":"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","sources":["src/js/index.js","src/js/pagination.js","src/js/upBtn.js"],"sourcesContent":["import './teamModal';\nimport './searchByKeyword';\nimport './cardModal';\nimport './pagination';\nimport './upBtn';\nimport './renderCards';\n","//імпорт асинхронної функції феч з отриманням даних з сервера\nimport cardTemplate from '../templates/cardTemplate.hbs';\nimport NewApiService from './api-servis';\nimport {\n  onInputForm,\n  numberOfGeneras,\n  ganreListProcessin,\n} from './searchByKeyword';\n\nimport NewLoader from './loader';\n\nconst newApiService = new NewApiService();\nconst newLoader = new NewLoader();\n\nlet page = 1;\nlet total = 20;\n\nlet markup = '';\nconst LEFT_ARROW = `<svg class=\"pagination__icon-left\"></svg>`;\nconst RIGHT_ARROW = `<svg class=\"pagination__icon-rigth\"></svg>`;\n\nconst pagePag = document.querySelector('.pagination');\nconst pageMainContent = document.querySelector('.main-content');\nconst searchForm = document.querySelector('.header__search');\n\ntotalAll();\nganreListProcessin().then(fetchData);\nrenderPagination(page, total);\naddListener();\nswitchArrow();\n\n//перемикач по кліку на цифри\n\nfunction addListener() {\n  const liElItems = document.querySelectorAll('.pagination__btn');\n\n  for (const liElItem of liElItems) {\n    if (liElItem.classList.contains('pagination__points')) {\n      continue;\n    }\n    liElItem.addEventListener('click', e => {\n      pageNum(liElItem.textContent * 1);\n      newApiService.pageNum = page;\n      reseter();\n      ganreListProcessin().then(fetchData);\n      renderPagination(page, total);\n      addListener(liElItems);\n\n      switchArrow();\n    });\n  }\n  searchForm.addEventListener('submit', e => {\n    //перемикач по кліку на цифри, запуск пагінації після пошуку по слову\n    pageNum(liElItem.textContent * 1);\n    //newApiService.pageNum = page;\n    reseter();\n    onInputForm();\n    renderPagination(page, total);\n    addListener(liElItems);\n    switchArrow();\n  });\n}\n\n//перемикач по кліку на <>\n\nfunction switchArrow() {\n  const jsBtnArrows = document.querySelectorAll('.js-arrow');\n\n  for (const jsBtnArrow of jsBtnArrows) {\n    jsBtnArrow.addEventListener('click', e => {\n      if (jsBtnArrow.classList.contains('pagination__arrow-left')) {\n        page = page - 1;\n        newApiService.pageNum = page;\n        reseter();\n        ganreListProcessin().then(fetchData);\n        renderPagination(page, total);\n        switchArrow();\n        addListener();\n      }\n\n      if (jsBtnArrow.classList.contains('pagination__arrow-right')) {\n        page = page + 1;\n\n        newApiService.pageNum = page;\n        reseter();\n        ganreListProcessin().then(fetchData);\n        renderPagination(page, total);\n        switchArrow();\n        addListener();\n      }\n    });\n  }\n}\n\n// // відбудова карток\n\nasync function fetchData(genresBase) {\n  try {\n    newLoader.showLoader();\n    await new Promise(resolve => setTimeout(resolve, 300));\n    await newApiService.fetchPopularMovies().then(({ results }) => {\n      results.map(result => {\n        const { poster_path, original_title, genre_ids, release_date, id } =\n          result;\n        const date = release_date.slice(0, 4);\n\n        const genres = [...genresBase.genres];\n        const genreIds = genre_ids;\n        let genresNames = [];\n        const other = 'Other';\n        for (let i = 0; i < genreIds.length; i++) {\n          const genre = genres.find(g => g.id === genreIds[i]);\n          genresNames.push(genre.name);\n        }\n        let currentGanre = [...genresNames.slice(0, 2), other].join(' ');\n        if (genresNames.length < numberOfGeneras) {\n          currentGanre = [...genresNames].join(' ');\n        }\n\n        const mk = cardTemplate({\n          poster_path,\n          original_title,\n          currentGanre,\n          date,\n          id,\n        });\n\n        const container = document.querySelector('.main-content');\n        container.insertAdjacentHTML('beforeend', mk);\n      });\n    });\n    newLoader.hideLoader();\n  } catch (error) {\n    console.error('Помилка під час отримання даних:', error);\n  }\n}\n\n//відбудова кнопок\n\nfunction renderPagination(page, total) {\n  if (total < 6) {\n    if (page != 1) {\n      markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n    }\n    for (let p = 1; p <= total; p++) {\n      console.log(total);\n      if (p === page) {\n        markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n      } else {\n        markup += `<li class=\"pagination__btn \">${p}</li>`;\n      }\n    }\n  } else {\n    if (page < 4) {\n      if (page != 1) {\n        markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n      }\n      for (let p = 1; p <= page + 2; p++) {\n        if (p === page) {\n          markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n        } else {\n          markup += `<li class=\"pagination__btn \">${p}</li>`;\n        }\n      }\n      markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n      markup += `<li class=\"pagination__btn \">${total}</li>`;\n      markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n    } else {\n      if (page > total - 3) {\n        markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n        markup += `<li class=\"pagination__btn \">1</li>`;\n        markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n        for (let p = page - 2; p <= total; p = p + 1) {\n          if (p === page) {\n            markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n          } else {\n            markup += `<li class=\"pagination__btn \">${p}</li>`;\n          }\n        }\n        if (total === page) {\n          markup += `<button class=\"pagination__arrow-right js-arrow pagination__arrow-hiden\">${RIGHT_ARROW}</button>`;\n        } else {\n          markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n        }\n      } else {\n        if (page <= total - 3) {\n          markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n          markup += `<li class=\"pagination__btn \">1</li>`;\n          markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n          for (let p = page - 2; p <= page + 2; p = p + 1) {\n            if (p === page) {\n              markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n            } else {\n              markup += `<li class=\"pagination__btn \">${p}</li>`;\n            }\n          }\n          markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n          markup += `<li class=\"pagination__btn \">${total}</li>`;\n          markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n        }\n      }\n    }\n  }\n  pagePag.innerHTML = markup;\n  markup = '';\n}\n\n//очистка\nfunction reseter() {\n  pagePag.innerHTML = '';\n  pageMainContent.innerHTML = '';\n}\n\n//оновлення нумерації по 'click'\nfunction pageNum(newPage) {\n  page = newPage;\n}\n\n//функція додавання № кінцевої сторінки\nfunction totalAll() {\n  newApiService.fetchPopularMovies().then(res => {\n    totalAll = res.total_pages;\n\n    totalPage(totalAll);\n  });\n\n  function totalPage() {\n    if (totalAll > 500) {\n      total = 500;\n    } else {\n      total = totalAll;\n    }\n  }\n}\n","function backToTop() {\n  let button = document.querySelector('.back-to-top');\n\n  window.addEventListener('scroll', () => {\n    const scrollY = window.scrollY || document.documentElement.scrollTop;\n    if (scrollY >= 300) {\n      button.classList.remove('btn-up_hide');\n    } else {\n      button.classList.add('btn-up_hide');\n    }\n  });\n\n  button.addEventListener('click', e => {\n    e.preventDefault();\n    window.scrollTo({\n      top: 0,\n      left: 0,\n      behavior: 'smooth',\n    });\n  });\n}\nbackToTop();\n"],"names":["parcelRequire","button","$bpxeT","$dfaf77c789ce7a24$var$newApiService","$igxJ3","default","$dfaf77c789ce7a24$var$newLoader","$kvC6y","$dfaf77c789ce7a24$var$page","$dfaf77c789ce7a24$var$total","$dfaf77c789ce7a24$var$markup","$dfaf77c789ce7a24$var$LEFT_ARROW","$dfaf77c789ce7a24$var$RIGHT_ARROW","$dfaf77c789ce7a24$var$pagePag","document","querySelector","$dfaf77c789ce7a24$var$pageMainContent","$dfaf77c789ce7a24$var$searchForm","$dfaf77c789ce7a24$var$addListener","liElItems","querySelectorAll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step1","liElItem","_step","value","classList","contains","addEventListener","e","$dfaf77c789ce7a24$var$pageNum","textContent","pageNum","$dfaf77c789ce7a24$var$reseter","$9BNc1","ganreListProcessin","then","$dfaf77c789ce7a24$var$fetchData","$dfaf77c789ce7a24$var$renderPagination","$dfaf77c789ce7a24$var$switchArrow","_iterator","Symbol","iterator","next","done","_loop","err","return","onInputForm","jsBtnArrows","_step3","jsBtnArrow","genresBase","$dfaf77c789ce7a24$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","showLoader","Promise","resolve","setTimeout","fetchPopularMovies","param","results","map","result","genre","genres","find","g","id","genreIds","i","genresNames","push","name","poster_path","original_title","genre_ids","release_date","date","slice","$8nrFW","i1","length","currentGanre","concat","join","numberOfGeneras","mk","$drCPS","insertAdjacentHTML","hideLoader","console","error","_ctx","t0","page1","total1","p","log","p1","p2","p3","innerHTML","newPage","$dfaf77c789ce7a24$var$totalAll","res","total_pages","window","scrollY","documentElement","scrollTop","remove","add","preventDefault","scrollTo","top","left","behavior"],"version":3,"file":"index.2f4ffe38.js.map"}