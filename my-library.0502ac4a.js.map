{"mappings":"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","sources":["src/js/renderMovieCardsToLibriary.js","src/js/searchMoviesInLibrary.js"],"sourcesContent":["import {\n  renderMovieCardsToQueue,\n  renderMovieCardsToWatched,\n} from './pagination';\n\nconst refs = {\n  queueBtn: document.querySelectorAll('.header__btn-queue')[0],\n  watchedBtn: document.querySelectorAll('.header__btn-watched')[0],\n  watchedBtnMobile: document.querySelectorAll('.header__btn-watched')[1],\n  queueBtnMobile: document.querySelectorAll('.header__btn-queue')[1],\n};\n\nrefs.queueBtn.addEventListener('click', renderMovieCardsToQueueCategory);\nrefs.watchedBtn.addEventListener('click', renderMovieCardsToWatchedCategory);\nrefs.watchedBtnMobile.addEventListener(\n  'click',\n  renderMovieCardsToWatchedCategory\n);\nrefs.queueBtnMobile.addEventListener('click', renderMovieCardsToQueueCategory);\n\nrenderMovieCardsToQueue();\n\nfunction renderMovieCardsToQueueCategory() {\n  refs.queueBtn.classList.add('header__btn-category--current');\n  refs.watchedBtn.classList.remove('header__btn-category--current');\n  refs.queueBtnMobile.classList.add('header__btn-category--current');\n  refs.watchedBtnMobile.classList.remove('header__btn-category--current');\n  renderMovieCardsToQueue();\n}\n\nfunction renderMovieCardsToWatchedCategory() {\n  refs.queueBtn.classList.remove('header__btn-category--current');\n  refs.watchedBtn.classList.add('header__btn-category--current');\n  refs.queueBtnMobile.classList.remove('header__btn-category--current');\n  refs.watchedBtnMobile.classList.add('header__btn-category--current');\n\n  renderMovieCardsToWatched();\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport '../sass/components/_my-library.scss';\nimport '../sass/components/_img-library.scss';\nimport { refs } from './refs';\n\nconst librarySearchFormRef = document.querySelector('#library_submit');\n\nconst paginationElement = document.getElementById('pagination');\n\nconst queueBtn = document.querySelector('.header__btn-queue');\nconst watchedBtn = document.querySelector('.header__btn-watched');\n\nconst arrOfMoviesInQueue = JSON.parse(localStorage.getItem('queue')) || [];\n\nif (arrOfMoviesInQueue.length === 0) {\n  librarySearchFormRef.elements[0].disabled = true;\n  librarySearchFormRef.elements[1].disabled = true;\n}\n\ndocument.addEventListener('click', checkIsFormMustBeDisabled);\n\nexport function checkIsFormMustBeDisabled() {\n  const librarySearchFormRef = document.querySelector('#library_submit');\n  const arrOfMoviesInQueue = JSON.parse(localStorage.getItem('queue')) || [];\n  const arrOfMoviesInWatched =\n    JSON.parse(localStorage.getItem('watched')) || [];\n  if (\n    queueBtn.classList.contains('header__btn-category--current') &&\n    arrOfMoviesInQueue.length !== 0\n  ) {\n    librarySearchFormRef.elements[0].disabled = false;\n    librarySearchFormRef.elements[1].disabled = false;\n  } else if (\n    watchedBtn.classList.contains('header__btn-category--current') &&\n    arrOfMoviesInWatched.length !== 0\n  ) {\n    librarySearchFormRef.elements[0].disabled = false;\n    librarySearchFormRef.elements[1].disabled = false;\n  } else {\n    librarySearchFormRef.elements[0].disabled = true;\n    librarySearchFormRef.elements[1].disabled = true;\n  }\n}\n\nlibrarySearchFormRef.addEventListener('submit', onLibrarySearchFormSubmit);\n\nfunction onLibrarySearchFormSubmit(e) {\n  e.preventDefault();\n\n  const searchQuery = e.currentTarget.elements.query.value;\n\n  if (queueBtn.classList.contains('header__btn-category--current')) {\n    searchMovieInLibrary(searchQuery, 'queue');\n  } else if (watchedBtn.classList.contains('header__btn-category--current')) {\n    searchMovieInLibrary(searchQuery, 'watched');\n  }\n  refs.moviesSearchForm.reset();\n}\n\nfunction searchMovieInLibrary(searchQuery, localStorageItem) {\n  const arrOfMoviesInLibrary =\n    JSON.parse(localStorage.getItem(localStorageItem)) || [];\n  const arrOfQueryMovies = arrOfMoviesInLibrary.filter(movie =>\n    movie.title.toLowerCase().includes(searchQuery.toLowerCase().trim())\n  );\n\n  refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">there are no similar films in this category</span></li>`;\n\n  if (searchQuery.trim() === '') {\n    paginationElement.style.display = 'none';\n    refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">The search query should not be empty</span></li>`;\n    return;\n  }\n\n  if (arrOfQueryMovies.length === 0) {\n    paginationElement.style.display = 'none';\n    refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">There are no similar movies in this category</span></li>`;\n    return;\n  }\n\n  renderMovieCards(arrOfQueryMovies);\n  paginationElement.style.display = 'flex';\n}\n\nfunction renderMovieCards(arrOfQueryMovies) {\n  let arrOfMovies = arrOfQueryMovies || [];\n\n  if (arrOfMovies.length === 0) {\n    const ul = document.querySelector('.gallery-list');\n    const markup = `<li class=\"img-library\"><span class=\"text-library\">Please select a movie on the main page</span></li>`;\n    ul.innerHTML = markup;\n  } else {\n    const DEFAULT_POSTER_URL =\n      'https://motivatevalmorgan.com/wp-content/uploads/2016/06/default-movie.jpg';\n\n    const itemsPerPage = 20;\n    const totalItems = arrOfMovies.length;\n    const totalPages = Math.ceil(totalItems / itemsPerPage);\n    const ul = document.querySelector('.gallery-list');\n\n    // Create the pagination instance and attach the event listener\n    const paginationElement = document.getElementById('pagination');\n\n    const pagination = new Pagination(paginationElement, {\n      totalItems: totalItems,\n      itemsPerPage: itemsPerPage,\n      visiblePages: 5,\n      page: 1,\n      centerAlign: true,\n      firstItemClassName: 'tui-first-child',\n      lastItemClassName: 'tui-last-child',\n      template: {\n        page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n        currentPage:\n          '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n\n        disabledMoveButton:\n          '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n          '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          '</span>',\n        moreButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n          '<span class=\"tui-ico-ellip\">...</span>' +\n          '</a>',\n      },\n      usageStatistics: false,\n    });\n    pagination.on('afterMove', function (eventData) {\n      ul.innerHTML = '';\n\n      const startIdx = (eventData.page - 1) * itemsPerPage;\n      const endIdx = startIdx + itemsPerPage;\n\n      const data = arrOfMovies;\n\n      const moviesArray = data.slice(startIdx, endIdx);\n\n      const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n      const markup = moviesArray\n        .map(({ poster_path, title, genres, id, release_date }) => {\n          const date = release_date.split('').splice(0, 4).join('');\n          let genresToShow = '';\n          const genresCount = genres.length;\n          const posterUrl = poster_path\n            ? `${IMG_URL}${poster_path}`\n            : DEFAULT_POSTER_URL;\n\n          if (genresCount === 1) {\n            genresToShow = `${genres[0].name}`;\n          } else if (genresCount === 2) {\n            genresToShow = `${genres[0].name}, ${genres[1].name}`;\n          } else if (genresCount > 2) {\n            genresToShow = `${genres[0].name}, ${genres[1].name}, other`;\n          }\n\n          return `<li class=\"film-card\">\n      <a href=\"modal-film.html\" class=\"film-card__link\" >\n        <div class=\"film-card__img\">\n          <img src=\"${posterUrl}\" alt=\"${title}\" loading=\"lazy\" data-id=\"${id}\"/>\n        </div>\n        <div class=\"film-card__info\">\n          <p class=\"film-card__title\">${title}</p>\n          <p class=\"film-card__description\">${genresToShow} | ${date}</p>\n        </div>\n      </a>\n    </li>`;\n        })\n        .join('');\n\n      refs.galleryList.innerHTML = markup;\n    });\n\n    // Load the first page when the page is loaded\n    pagination.movePageTo(1);\n  }\n}\n"],"names":["$jcFG7","parcelRequire","$e54e9edc9be2dbe2$var$refs","queueBtn","document","querySelectorAll","watchedBtn","watchedBtnMobile","queueBtnMobile","$e54e9edc9be2dbe2$var$renderMovieCardsToQueueCategory","classList","add","remove","renderMovieCardsToQueue","$e54e9edc9be2dbe2$var$renderMovieCardsToWatchedCategory","renderMovieCardsToWatched","addEventListener","$1VFfL","$ca46372a8242ee6a$var$librarySearchFormRef","querySelector","$ca46372a8242ee6a$var$paginationElement","getElementById","$ca46372a8242ee6a$var$queueBtn","$ca46372a8242ee6a$var$watchedBtn","$ca46372a8242ee6a$var$searchMovieInLibrary","searchQuery","localStorageItem","arrOfQueryMovies","JSON","parse","localStorage","getItem","filter","movie","title","toLowerCase","includes","trim","$4Nugj","refs","galleryList","innerHTML","style","display","length","arrOfMovies","markup","DEFAULT_POSTER_URL","itemsPerPage","totalItems","ul1","Math","ceil","paginationElement1","pagination","$parcel$interopDefault","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","disabledMoveButton","moreButton","usageStatistics","on","eventData","startIdx","endIdx","moviesArray","slice","IMG_URL","map","param","poster_path","genres","id","date","release_date","split","splice","join","genresToShow","genresCount","posterUrl","concat","name","movePageTo","$ca46372a8242ee6a$var$renderMovieCards","elements","disabled","librarySearchFormRef1","arrOfMoviesInQueue1","arrOfMoviesInWatched","contains","e","preventDefault","currentTarget","query","value","moviesSearchForm","reset"],"version":3,"file":"my-library.0502ac4a.js.map"}