{"mappings":"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","sources":["src/js/index.js","src/js/renderCards.js","src/js/pagination.js","src/js/upBtn.js"],"sourcesContent":["import './teamModal';\nimport './searchByKeyword';\nimport './renderCards';\nimport './cardModal';\nimport './pagination';\nimport './upBtn';\n","import cardTemplate from '../templates/cardTemplate.hbs';\nimport NewApiService from './api-servis';\nimport { numberOfGeneras, ganreListProcessin } from './searchByKeyword';\nimport NewLoader from './loader';\n\nconst newApiService = new NewApiService();\nconst newLoader = new NewLoader();\n\nganreListProcessin().then(fetchData);\n\nasync function fetchData(genresBase) {\n  try {\n    newLoader.showLoader();\n    await new Promise(resolve => setTimeout(resolve, 300));\n    await newApiService.fetchPopularMovies().then(({ results }) => {\n      results.map(result => {\n        const { poster_path, original_title, genre_ids, release_date, id } =\n          result;\n        const date = release_date.slice(0, 4);\n\n        const genres = [...genresBase.genres];\n        const genreIds = genre_ids;\n        let genresNames = [];\n        const other = 'Other';\n        for (let i = 0; i < genreIds.length; i++) {\n          const genre = genres.find(g => g.id === genreIds[i]);\n          genresNames.push(genre.name);\n        }\n        let currentGanre = [...genresNames.slice(0, 2), other].join(' ');\n        if (genresNames.length < numberOfGeneras) {\n          currentGanre = [...genresNames].join(' ');\n        }\n\n        const mk = cardTemplate({\n          poster_path,\n          original_title,\n          currentGanre,\n          date,\n          id,\n        });\n\n        const container = document.querySelector('.main-content');\n        container.insertAdjacentHTML('beforeend', mk);\n      });\n    });\n    newLoader.hideLoader();\n  } catch (error) {\n    console.error('Помилка під час отримання даних:', error);\n  }\n}\n","\n//імпорт асинхронної функції феч з отриманням даних з сервера \nimport cardTemplate from '../templates/cardTemplate.hbs'\nimport NewApiService from './api-servis'\nimport {onInputForm} from './searchByKeyword'\nconst newApiService = new NewApiService()\n\n\nlet page = 1;\nlet total = 20;\n\nlet markup = '';\nconst LEFT_ARROW = `<svg class=\"pagination__icon-left\"></svg>`;\nconst RIGHT_ARROW = `<svg class=\"pagination__icon-rigth\"></svg>`;\n\nconst pagePag = document.querySelector('.pagination');\nconst pageMainContent = document.querySelector('.main-content');\nconst searchForm = document.querySelector('.header__search');\n\ntotalAll();\nmainContent();\nrenderPagination(page, total);\naddListener();\nswitchArrow();\n\n//перемикач по кліку на цифри\n\n function addListener(){\n  const liElItems = document.querySelectorAll(\".pagination__btn\");\n\n  for (const liElItem of liElItems) {\n    if (liElItem.classList.contains('pagination__points')) {\n      continue;\n    }\n    liElItem.addEventListener('click', e => {\n      pageNum(liElItem.textContent * 1);\n      newApiService.pageNum = page;\n      reseter();\n      mainContent();\n      renderPagination(page, total);\n      addListener(liElItems);\n\n      switchArrow ();\n    })\n  }  searchForm.addEventListener('submit', (e) =>{ //перемикач по кліку на цифри, запуск пагінації після пошуку по слову\n      pageNum(liElItem.textContent*1)\n      //newApiService.pageNum = page;\n      reseter();\n      onInputForm();\n      renderPagination(page, total);\n      addListener(liElItems);\n      switchArrow ();\n  }); \n\n}\n\n//перемикач по кліку на <>\n\nfunction switchArrow (){\n  const jsBtnArrows = document.querySelectorAll(\".js-arrow\");\n  \n  for (const jsBtnArrow of jsBtnArrows){\n    jsBtnArrow.addEventListener ('click', (e) => {\n  \n      if (jsBtnArrow.classList.contains(\"pagination__arrow-left\")) {\n\n        page = page - 1;\n        newApiService.pageNum = page;\n        reseter();\n        mainContent();\n        renderPagination(page, total);\n        switchArrow();\n        addListener();\n      }\n\n      \n      if (jsBtnArrow.classList.contains(\"pagination__arrow-right\")) {\n        page = page + 1\n\n        newApiService.pageNum = page;\n        reseter();\n        mainContent();\n        renderPagination(page, total);\n        switchArrow();\n        addListener();\n      }\n    });\n  }\n}\n\n// відбудова карток\nfunction mainContent() {\n  const pageMainContent = document.querySelector('.main-content');\n  newApiService.fetchPopularMovies().then(({ results }) => {\n    results.map(result => {\n      const { poster_path, original_title, genre_ids, release_date, id } =\n        result;\n      const genres = genre_ids.join(', ');\n      const date = release_date.slice(0, 4);\n      const mk = cardTemplate({\n        poster_path,\n        original_title,\n        genres,\n        date,\n        id,\n      });\n      const container = document.querySelector('.main-content');\n      container.insertAdjacentHTML('beforeend', mk);\n    });\n  });\n}\n\n//відбудова кнопок\n\nfunction renderPagination(page, total) { \n  \n\n  if (total < 6) {\n    if (page != 1) {\n      markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n    }\n    for (let p = 1; p <= total; p++) {\n      console.log(total);\n      if (p === page) {\n        markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n      } else {\n        markup += `<li class=\"pagination__btn \">${p}</li>`;\n      }\n    }\n  } else {\n    if (page < 4) {\n      if (page != 1) {\n        markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n      }\n      for (let p = 1; p <= page + 2; p++) {\n        if (p === page) {\n          markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n        } else {\n          markup += `<li class=\"pagination__btn \">${p}</li>`;\n        }\n      }\n      markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n      markup += `<li class=\"pagination__btn \">${total}</li>`;\n      markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n    } else {\n      if (page > total - 3) {\n        markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n        markup += `<li class=\"pagination__btn \">1</li>`;\n        markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n        for (let p = page - 2; p <= total; p = p + 1) {\n          if (p === page) {\n            markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n          } else {\n            markup += `<li class=\"pagination__btn \">${p}</li>`;\n          }\n        }\n        if (total === page) {\n          markup += `<button class=\"pagination__arrow-right js-arrow pagination__arrow-hiden\">${RIGHT_ARROW}</button>`;\n        } else {\n          markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n        }\n      } else {\n        if (page <= total - 3) {\n          markup += `<button class=\"pagination__arrow-left js-arrow\">${LEFT_ARROW}</button>`;\n          markup += `<li class=\"pagination__btn \">1</li>`;\n          markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n          for (let p = page - 2; p <= page + 2; p = p + 1) {\n            if (p === page) {\n              markup += `<li class=\"pagination__btn pagination__btn-active \">${page}</li>`;\n            } else {\n              markup += `<li class=\"pagination__btn \">${p}</li>`;\n            }\n          }\n          markup += `<li class=\"pagination__btn pagination__points\">...</li>`;\n          markup += `<li class=\"pagination__btn \">${total}</li>`;\n          markup += `<button class=\"pagination__arrow-right js-arrow\">${RIGHT_ARROW}</button>`;\n        }\n      }\n    }\n  }\n  pagePag.innerHTML = markup;\n  markup = '';\n}\n\n//очистка\nfunction reseter() {\n  pagePag.innerHTML = '';\n  pageMainContent.innerHTML = '';\n}\n\n//оновлення нумерації по 'click'\nfunction pageNum(newPage) {\n  page = newPage;\n}\n\n//функція додавання № кінцевої сторінки\nfunction totalAll() {\n  newApiService.fetchPopularMovies().then(res => {\n    totalAll = res.total_pages;\n\n    totalPage(totalAll)\n  })\n\n  function totalPage() {\n    if (totalAll > 500) {\n      total = 500;\n    } else {\n      total = totalAll;\n    }\n  }\n}\n","function backToTop() {\n  let button = document.querySelector('.back-to-top');\n\n  window.addEventListener('scroll', () => {\n    const scrollY = window.scrollY || document.documentElement.scrollTop;\n    if (scrollY >= 300) {\n      button.classList.remove('btn-up_hide');\n    } else {\n      button.classList.add('btn-up_hide');\n    }\n  });\n\n  button.addEventListener('click', e => {\n    e.preventDefault();\n    window.scrollTo({\n      top: 0,\n      left: 0,\n      behavior: 'smooth',\n    });\n  });\n}\nbackToTop();\n"],"names":["parcelRequire","$gh9Wa","$dc777f51b705d798$var$newApiService","$fgrH9","default","$dc777f51b705d798$var$newLoader","$gjiCh","$lxQoS","ganreListProcessin","then","async","genresBase","showLoader","Promise","resolve","setTimeout","fetchPopularMovies","results","map","result","poster_path","original_title","genre_ids","release_date","id","date","slice","genres","genreIds","genresNames","i","length","genre","find","g","push","name","currentGanre","join","numberOfGeneras","mk","document","querySelector","insertAdjacentHTML","hideLoader","error","console","$1bab9c519cfa82bc$var$newApiService","$1bab9c519cfa82bc$var$page","$1bab9c519cfa82bc$var$total","$1bab9c519cfa82bc$var$markup","$1bab9c519cfa82bc$var$pagePag","$1bab9c519cfa82bc$var$pageMainContent","$1bab9c519cfa82bc$var$searchForm","$1bab9c519cfa82bc$var$addListener","liElItems","querySelectorAll","liElItem1","classList","contains","addEventListener","e","$1bab9c519cfa82bc$var$pageNum","textContent","pageNum","$1bab9c519cfa82bc$var$reseter","$1bab9c519cfa82bc$var$mainContent","$1bab9c519cfa82bc$var$renderPagination","$1bab9c519cfa82bc$var$switchArrow","liElItem","onInputForm","jsBtnArrows","jsBtnArrow","page1","total1","p","log","innerHTML","newPage","$1bab9c519cfa82bc$var$totalAll","res","total_pages","button","window","scrollY","documentElement","scrollTop","remove","add","preventDefault","scrollTo","top","left","behavior","$847794d47e5d1621$var$backToTop"],"version":3,"file":"index.3dff07e7.js.map"}